<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Aask Ai Authentication</title>
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Google Fonts (optional, for a modern look) -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background: linear-gradient(135deg, #e0e7ef 0%, #f3f4f6 100%);
      min-height: 100vh;
    }
    .shadow-custom {
      box-shadow: 0 4px 24px rgba(59, 130, 246, 0.08), 0 1.5px 6px rgba(59, 130, 246, 0.04);
    }
  </style>
  <!-- Firebase App (the core Firebase SDK) -->
  <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-app-compat.js"></script>
  <!-- Firebase Auth SDK -->
  <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-auth-compat.js"></script>
</head>
<body>
  <div class="flex items-center justify-center min-h-screen">
    <div class="bg-white rounded-2xl shadow-custom w-full max-w-md p-8 mx-4">
      <h1 class="text-3xl font-bold text-center mb-2">
        Welcome to <span class="text-blue-500">Aask Ai</span>
      </h1>
      <p class="text-gray-500 text-center mb-6">Sign in or create an account to get started.</p>
      <div id="status" class="mb-4 text-center text-sm"></div>
      <form id="authForm" class="space-y-4">
        <input
          id="email"
          type="email"
          placeholder="Email"
          class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:border-blue-500 transition"
          autocomplete="email"
          required
        />
        <input
          id="password"
          type="password"
          placeholder="Password"
          class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:border-blue-500 transition"
          autocomplete="current-password"
          required
        />
        <button
          id="primaryBtn"
          type="submit"
          class="w-full py-3 rounded-lg bg-blue-500 text-white font-semibold hover:bg-blue-600 transition"
        >
          Sign In
        </button>
      </form>
      <div class="flex justify-between items-center mt-4">
        <button
          id="toggleMode"
          class="text-blue-500 hover:underline text-sm"
        >
          Don't have an account? Sign Up
        </button>
        <button
          id="anonBtn"
          class="text-gray-500 hover:text-blue-500 text-sm"
        >
          Continue Anonymously
        </button>
      </div>
    </div>
  </div>
  <script>
    // TODO: Replace with your Firebase config
    const firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "YOUR_AUTH_DOMAIN",
      projectId: "YOUR_PROJECT_ID",
      appId: "YOUR_APP_ID"
    };
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();

    // UI Elements
    const authForm = document.getElementById('authForm');
    const emailInput = document.getElementById('email');
    const passwordInput = document.getElementById('password');
    const primaryBtn = document.getElementById('primaryBtn');
    const toggleMode = document.getElementById('toggleMode');
    const anonBtn = document.getElementById('anonBtn');
    const statusDiv = document.getElementById('status');

    let isSignIn = true;

    function setStatus(message, isError = false) {
      statusDiv.textContent = message;
      statusDiv.className = 'mb-4 text-center text-sm ' + (isError ? 'text-red-500' : 'text-blue-500');
    }

    function clearStatus() {
      statusDiv.textContent = '';
      statusDiv.className = 'mb-4 text-center text-sm';
    }

    function updateMode() {
      if (isSignIn) {
        primaryBtn.textContent = 'Sign In';
        toggleMode.textContent = "Don't have an account? Sign Up";
      } else {
        primaryBtn.textContent = 'Sign Up';
        toggleMode.textContent = "Already have an account? Sign In";
      }
      clearStatus();
    }

    toggleMode.addEventListener('click', (e) => {
      e.preventDefault();
      isSignIn = !isSignIn;
      updateMode();
    });

    authForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      clearStatus();
      const email = emailInput.value.trim();
      const password = passwordInput.value;
      if (!email || !password) {
        setStatus('Please enter both email and password.', true);
        return;
      }
      setStatus(isSignIn ? 'Logging in...' : 'Creating account...');
      try {
        if (isSignIn) {
          await auth.signInWithEmailAndPassword(email, password);
          setStatus('Logged in successfully!');
          // Redirect or continue to app
        } else {
          await auth.createUserWithEmailAndPassword(email, password);
          setStatus('Account created successfully!');
          // Redirect or continue to app
        }
      } catch (error) {
        handleAuthError(error);
      }
    });

    anonBtn.addEventListener('click', async (e) => {
      e.preventDefault();
      clearStatus();
      setStatus('Signing in anonymously...');
      try {
        await auth.signInAnonymously();
        setStatus('Signed in anonymously!');
        // Redirect or continue to app
      } catch (error) {
        handleAuthError(error);
      }
    });

    function handleAuthError(error) {
      let message = 'An error occurred.';
      if (error.code) {
        switch (error.code) {
          case 'auth/invalid-email':
            message = 'Invalid email address.';
            break;
          case 'auth/user-not-found':
            message = 'No account found with this email.';
            break;
          case 'auth/wrong-password':
            message = 'Incorrect password.';
            break;
          case 'auth/email-already-in-use':
            message = 'Email is already in use.';
            break;
          case 'auth/weak-password':
            message = 'Password should be at least 6 characters.';
            break;
          default:
            message = error.message;
        }
      }
      setStatus(message, true);
    }

    updateMode();
  </script>
</body>
</html>